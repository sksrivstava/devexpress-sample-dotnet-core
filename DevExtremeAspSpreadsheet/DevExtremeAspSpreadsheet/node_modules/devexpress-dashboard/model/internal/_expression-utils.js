/**
* DevExpress Dashboard (_expression-utils.js)
* Version:  20.1.6
* Build date: Jul 17, 2020
* Copyright (c) 2012 - 2020 Developer Express Inc. ALL RIGHTS RESERVED
* License: https://www.devexpress.com/Support/EULAs/universal.xml
*/
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var dx_analytics_core_1 = require("@devexpress/analytics-core/dx-analytics-core");
function getFilterCriteria(filterString) {
    var criteriaSerializer = new dx_analytics_core_1.default.Analytics.Widgets.Internal.FilterEditorSerializer();
    return criteriaSerializer.deserialize(filterString);
}
exports.getFilterCriteria = getFilterCriteria;
function insertDimensionsExpressionsIntoFilterExpression(filterString, dimensionsExpressions) {
    var criteriaSerializer = new dx_analytics_core_1.default.Analytics.Widgets.Internal.FilterEditorSerializer();
    var filterCriteria = criteriaSerializer.deserialize(filterString);
    var dimensionsCriteria = {};
    for (var dimensionName in dimensionsExpressions)
        dimensionsCriteria[dimensionName] = dx_analytics_core_1.default.Analytics.Criteria.CriteriaOperator.parse(dimensionsExpressions[dimensionName]);
    var patched = DimensionExpressionInserter.patch(filterCriteria, dimensionsCriteria);
    return criteriaSerializer.serialize(patched);
}
exports.insertDimensionsExpressionsIntoFilterExpression = insertDimensionsExpressionsIntoFilterExpression;
var DimensionExpressionInserter = (function () {
    function DimensionExpressionInserter(dimensionsCriteria) {
        this._dimensionsCriteria = dimensionsCriteria;
    }
    DimensionExpressionInserter.patch = function (criteria, dimensionsCriteria) {
        var patcher = new DimensionExpressionInserter(dimensionsCriteria);
        return criteria.accept(patcher);
    };
    DimensionExpressionInserter.prototype.visitOperandProperty = function (element) {
        return this._dimensionsCriteria[element.propertyName];
    };
    return DimensionExpressionInserter;
}());
exports.DimensionExpressionInserter = DimensionExpressionInserter;
